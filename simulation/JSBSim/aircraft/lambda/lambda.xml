<?xml version="1.0"?>
<?xml-stylesheet type="text/xsl" href="http://jsbsim.sourceforge.net/JSBSim.xsl"?>
<fdm_config version="2.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://jsbsim.sourceforge.net/JSBSim.xsd"
    name="Lambda-4S-5" release="ALPHA">

    <fileheader>
      <author> Nathan Bergey </author>
      <filecreationdate> 2015-12-01 </filecreationdate>
      <version> 0.1 </version>
      <description> Lambda-4S-5 orbital rocket. Succesfully launched in February 1970. </description>
      <note>
        Relying heavily on The Institute of Space and Astronautical Science Reports.
      </note>
    </fileheader>


    <!-- Main aerdynamic properties -->
    <metrics>
        <wingarea   unit="M2">  0.424 </wingarea>  <!-- Cross sectional area -->
        <wingspan   unit="M">   0.735 </wingspan>  <!-- Width of body -->
        <chord      unit="M">  16.522 </chord>     <!-- Reference length -->
        <htailarea  unit="M2">  0.0   </htailarea>
        <htailarm   unit="M">   0.0   </htailarm>
        <vtailarea  unit="M2">  0.0   </vtailarea>
        <vtailarm   unit="M">   0.0   </vtailarm>
        <location name="AERORP" unit="M">
            <x> 11.8 </x>                          <!-- Center of Pressure (M=0) -->
            <y>  0   </y>
            <z>  0   </z>
        </location>
    </metrics>


    <!--########################################################################
    Mass Balance
    #########################################################################-->
    <mass_balance>

        <!-- Main Rocket. This is actually the Osumi satellite plus the 4th stage motor -->
        <ixx unit="KG*M2">    0.259  </ixx>
        <iyy unit="KG*M2">    0.436  </iyy>
        <izz unit="KG*M2">    0.436  </izz>
        <ixy unit="KG*M2">    0      </ixy>
        <ixz unit="KG*M2">    0      </ixz>
        <iyz unit="KG*M2">    0      </iyz>
        <emptywt unit="KG">  23.05   </emptywt>
        <location name="CG" unit="M">
            <x> 0.557 </x>
            <y> 0 </y>
            <z> 0 </z>
        </location>

        <!-- Other masses will be shed during parts of the flight so they are treated as parts -->

        <!-- Nose Cone -->
        <pointmass name="Nose Faring">
            <form shape="tube">
                <radius unit="M"> 0.504 </radius>
                <length unit="M"> 1.0   </length>
            </form>
            <weight unit="KG"> 10 </weight> <!-- TODO: guess this number -->
            <location unit="M">
                <x> 0.5 </x>
                <y> 0.0 </y>
                <z> 0.0 </z>
            </location>
        </pointmass>

        <!-- 3rd Stage -->
        <pointmass name="3rd Stage">
            <form shape="tube">
                <radius unit="M"> 0.504 </radius>
                <length unit="M"> 2.963 </length>
            </form>
            <weight unit="KG"> 394.9 </weight>
            <location unit="M">
                <x> 1.940 </x>
                <y> 0.0 </y>
                <z> 0.0 </z>
            </location>
        </pointmass>

        <!-- 2nd Stage -->
        <pointmass name="2nd Stage">
            <form shape="tube">
                <radius unit="M"> 0.735 </radius>
                <length unit="M"> 3.963 </length>
            </form>
            <weight unit="KG"> 1562.5 </weight>
            <location unit="M">
                <x> 6.0 </x>
                <y> 0.0 </y>
                <z> 0.0 </z>
            </location>
        </pointmass>

        <!-- Right Booster -->
        <pointmass name="Right Booster">
            <form shape="tube">
                <radius unit="M"> 0.310 </radius>
                <length unit="M"> 5.772 </length>
            </form>
            <weight unit="KG"> 381.0 </weight>
            <location unit="M">
                <x> 13.4 </x>
                <y> 0.0 </y>
                <z> 0.5225 </z>
            </location>
        </pointmass>

        <!-- Left Booster -->
        <pointmass name="Left Booster">
            <form shape="tube">
                <radius unit="M"> 0.310 </radius>
                <length unit="M"> 5.772 </length>
            </form>
            <weight unit="KG"> 381.0 </weight>
            <location unit="M">
                <x> 13.4 </x>
                <y> 0.0 </y>
                <z> -0.5225 </z>
            </location>
        </pointmass>

        <!-- 1st Stage -->
        <pointmass name="1st Stage">
            <form shape="tube">
                <radius unit="M"> 0.735 </radius>
                <length unit="M"> 8.381 </length>
            </form>
            <weight unit="KG"> 4507 </weight>
            <location unit="M">
                <x> 12.33 </x>
                <y> 0.0 </y>
                <z> 0.0 </z>
            </location>
        </pointmass>
    </mass_balance>


    <!--########################################################################
    Propulsion
    #########################################################################-->
    <propulsion>

         <!-- [0] Right Booster -->
         <engine file="lambda-booster">
           <location unit="M">
             <x> 16.522  </x>
             <y>  0      </y>
             <z>  0.5225 </z>
           </location>
           <feed>0</feed>
           <thruster file="lambda-booster_nozzle">
             <location unit="M">
               <x> 16.522 </x>
               <y> 0      </y>
               <z> 0.5225 </z>
             </location>
           </thruster>
         </engine>
         <tank type="FUEL">
           <location unit="M">
             <x> 13.4    </x>
             <y>  0      </y>
             <z>  0.5225 </z>
           </location>
           <radius unit="M">0.310</radius>
           <grain_config type="CYLINDRICAL">
             <length unit="M"> 5.772 </length>
             <bore_diameter unit="M"> 0.2 </bore_diameter>
           </grain_config>
           <capacity unit="KG"> 624.0 </capacity>
           <contents unit="KG"> 624.0 </contents>
         </tank>

         <!-- [1] Left Booster -->
         <engine file="lambda-booster">
           <location unit="M">
             <x> 16.522  </x>
             <y>  0      </y>
             <z>  -0.5225 </z>
           </location>
           <feed>1</feed>
           <thruster file="lambda-booster_nozzle">
             <location unit="M">
               <x> 16.522 </x>
               <y> 0      </y>
               <z> -0.5225 </z>
             </location>
           </thruster>
         </engine>
         <tank type="FUEL">
           <location unit="M">
             <x> 13.4    </x>
             <y>  0      </y>
             <z>  -0.5225 </z>
           </location>
           <radius unit="M">0.310</radius>
           <grain_config type="CYLINDRICAL">
             <length unit="M"> 5.772 </length>
             <bore_diameter unit="M"> 0.2 </bore_diameter>
           </grain_config>
           <capacity unit="KG"> 624.0 </capacity>
           <contents unit="KG"> 624.0 </contents>
         </tank>


          <!-- [2] First Stage -->
          <engine file="735-full">
            <location unit="M">
              <x> 16.522  </x>
              <y>  0      </y>
              <z>  0      </z>
            </location>
            <feed>2</feed>
            <thruster file="735-full_nozzle">
              <location unit="M">
                <x> 16.522 </x>
                <y> 0      </y>
                <z> 0      </z>
              </location>
            </thruster>
          </engine>
          <tank type="FUEL">
            <location unit="M">
              <x> 12      </x>
              <y>  0      </y>
              <z>  0      </z>
            </location>
            <radius unit="M">0.735</radius>
            <grain_config type="CYLINDRICAL">
              <length unit="M"> 8 </length>
              <bore_diameter unit="M"> 0.4 </bore_diameter>
            </grain_config>
            <capacity unit="KG"> 3887.0 </capacity>
            <contents unit="KG"> 3887.0 </contents>
          </tank>


    </propulsion>


    <ground_reactions /><!-- Not used - hold down model keeps vehicle in place -->
    <aerodynamics />

    <system name="Guidance Executive" file="GuidanceExecutive" />

    <!-- Output -->
    <output name="data.csv" type="CSV" rate="100">
      <property caption="MET [s]">              guidance/executive/MET          </property>
      <property caption="Altitude MSL [m]">     position/h-sl-meters            </property>
      <property caption="Latitude [deg]">       position/lat-gc-deg             </property>
      <property caption="Longitdue [deg]">      position/long-gc-deg            </property>
      <property caption="Thrust [lbf]">         forces/fbx-prop-lbs             </property>
      <property caption="Total Mass [lbs]">     inertia/weight-lbs              </property>
      <property caption="Pitch [deg]">          attitude/theta-deg              </property>
      <property caption="ECEI Velocity (fps)">  velocities/ned-velocity-mag-fps </property>
      <property caption="ECI Velocity (fps)">   velocities/eci-velocity-mag-fps </property>
      <property caption="Qbar area">            aero/qbar-area                  </property>
      <property caption="Accel U (ft/s^2)">     accelerations/udot-ft_sec2      </property>
      <property caption="Accel V (ft/s^2)">     accelerations/vdot-ft_sec2      </property>
      <property caption="Accel W (ft/s^2)">     accelerations/wdot-ft_sec2      </property>
    </output>

</fdm_config>
